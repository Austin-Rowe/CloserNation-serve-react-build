(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(32),o=a.n(s),r=(a(81),a(2)),c=a(3),l=a(5),u=a(4),d=a(6),h=a(11),m=a(20),p=a(10),g=a(19),b=a(34),f={loggedIn:!1,authToken:"",freeDayToken:"",freeDayTokenUsed:!0,userName:"",currentlySubscribed:!1,streamAddress:"",archivedShows:[],admin:!1,selectedArchive:{},refetchMutedUserList:!0},E=Object(b.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(g.a)({},e,{loggedIn:!0,authToken:t.authToken,userName:t.userName,admin:t.admin,currentlySubscribed:t.currentlySubscribed,freeDayToken:t.freeDayToken,freeDayTokenUsed:t.freeDayTokenUsed});case"LOGOUT":return Object(g.a)({},e,{loggedIn:!1,authToken:"",userName:"",admin:!1});case"SETSTREAMADDRESS":return Object(g.a)({},e,{streamAddress:t.streamAddress});case"SETARCHIVEDSHOWS":return Object(g.a)({},e,{archivedShows:t.archivedShows});case"SELECTARCHIVE":return Object(g.a)({},e,{selectedArchive:t.selectedArchive});case"REFETCHMUTEDUSERLIST":return Object(g.a)({},e,{refetchMutedUserList:t.refetch});case"CLEARARCHIVES":return Object(g.a)({},e,{archivedShows:[],selectedArchive:{}});default:return e}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),v=a(1),y=(a(86),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={menuVisible:!1,watchDropDownVisible:!1,mobile:!0},a.menuToggle=a.menuToggle.bind(Object(v.a)(a)),a.hideMenu=a.hideMenu.bind(Object(v.a)(a)),a.toggleWatchDropDown=a.toggleWatchDropDown.bind(Object(v.a)(a)),a.hideWatchDropDown=a.hideWatchDropDown.bind(Object(v.a)(a)),a.checkWidth=a.checkWidth.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"checkWidth",value:function(){this.setState({mobile:window.innerWidth<600,menuVisible:window.innerWidth>=600}),setTimeout(function(){window.requestAnimationFrame(function(){var e=getComputedStyle(document.getElementById("header-container"));document.body.style.paddingTop="".concat(parseInt(e.height)+30,"px")})},1e3)}},{key:"componentDidMount",value:function(){var e=this;this.checkWidth(),window.addEventListener("resize",function(){e.checkWidth()})}},{key:"menuToggle",value:function(e){e.stopPropagation(),this.setState(function(e){return{menuVisible:!e.menuVisible,watchDropDownVisible:!1}})}},{key:"hideMenu",value:function(){this.setState({menuVisible:!1,watchDropDownVisible:!1})}},{key:"toggleWatchDropDown",value:function(){this.setState(function(e){return{watchDropDownVisible:!!e.menuVisible&&!e.watchDropDownVisible}})}},{key:"hideWatchDropDown",value:function(){this.setState({watchDropDownVisible:!1})}},{key:"render",value:function(){return i.a.createElement("div",{id:"header-container",onMouseLeave:this.state.mobile?this.hideMenu:null},i.a.createElement("div",{id:"drop-down-toggle",className:this.state.mobile?null:"hidden",onClick:this.menuToggle},i.a.createElement("div",{className:"hamburger-bar"}),i.a.createElement("div",{className:"hamburger-bar"}),i.a.createElement("div",{className:"hamburger-bar"})),i.a.createElement("img",{onClick:this.checkWidth,id:"header-image",src:this.state.mobile?"/Images/HeaderMobile.jpg":"/Images/LightHeader.jpg",alt:"BEST CLOSER SHOW"}),i.a.createElement(h.b,{to:"/ACCOUNT",onClick:this.state.mobile?this.hideMenu:null},i.a.createElement("div",{className:this.state.menuVisible?"header-option":"header-option hidden"},i.a.createElement("h1",null,"ACCOUNT"))),i.a.createElement("a",{href:"https://indictmentclothing.com",target:"_blank",rel:"noopener noreferrer",onClick:this.state.mobile?this.hideMenu:null},i.a.createElement("div",{className:this.state.menuVisible?"header-option":"header-option hidden"},i.a.createElement("h1",null,"SHOP"))),i.a.createElement("div",{onMouseLeave:this.state.mobile?null:this.hideWatchDropDown,onMouseEnter:this.state.mobile?null:this.toggleWatchDropDown,onClick:this.toggleWatchDropDown},i.a.createElement("div",{className:this.state.menuVisible?"header-option":"header-option hidden"},i.a.createElement("h1",null,"WATCH")),i.a.createElement("div",{className:this.state.watchDropDownVisible?null:"hidden",onClick:this.state.mobile?this.hideMenu:null},i.a.createElement(h.b,{to:"/STREAM"},i.a.createElement("div",{className:"header-option"},i.a.createElement("h1",null,"LIVE"))),i.a.createElement(h.b,{to:"/ARCHIVES"},i.a.createElement("div",{className:"header-option"},i.a.createElement("h1",null,"ARCHIVES"))))))}}]),t}(n.Component)),w=a(36),S=(a(97),function(){return i.a.createElement("div",{id:"footer-container"},i.a.createElement("div",{className:"footer-section",id:"connect"},i.a.createElement("h1",{className:"footer-section-title"},"Connect"),i.a.createElement(w.SocialIcon,{className:"social-icon",url:"https://twitter.com/thebestcloser",target:"_blank",rel:"noopener noreferrer"}),i.a.createElement(w.SocialIcon,{className:"social-icon",url:"https://www.youtube.com/channel/UC1F1L-SeCrINe2-PJjbdXpQ",target:"_blank",rel:"noopener noreferrer"}),i.a.createElement(w.SocialIcon,{className:"social-icon",url:"https://facebook.com/thebestcloser",target:"_blank",rel:"noopener noreferrer"})),i.a.createElement("div",{className:"footer-section",id:"contact"},i.a.createElement("h1",{className:"footer-section-title"},"Contact"),i.a.createElement("a",{id:"email",href:"mailto:info@bestclosershow.com"},"info@bestclosershow.com")))}),k=a(35),O=a.n(k),N=a(8),C=a(75),T=a(72),j=a.n(T)()("https://api.bestclosershow.com"),A={postMessage:function(e,t){j.emit("post message",{message:t,token:e})},handleIncomingMessage:function(e,t){j.on("new message",function(t){return e(t)}),j.on("err",function(e){return t(e)})}},D=(a(131),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleMute=a.toggleMute.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toggleMute",value:function(){var e=this,t=this.props.messageObj.userName;fetch("https://api.bestclosershow.com/user/alter-permissions/".concat(t),{method:"PATCH",body:JSON.stringify({changes:[{propName:"canChat",value:!1}]}),headers:{"Content-Type":"application/json",Authorization:this.props.authToken}}).then(function(t){return 200!==t.status&&console.log("muting user failed"),200===t.status&&e.props.dispatch({type:"REFETCHMUTEDUSERLIST",refetch:!0}),t.json()}).catch(function(e){return console.error("Error: "+e)})}},{key:"render",value:function(){var e=this.props.messageObj;return i.a.createElement("li",{className:"message-container"},i.a.createElement("div",{className:"username-label"},e.userName),this.props.admin?i.a.createElement("div",{className:"mute",onClick:this.toggleMute},"MUTE"):null,i.a.createElement("p",{className:"chat-message"},e.message))}}]),t}(n.Component)),P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={messages:[],message:"",messageErr:!1,errMessage:"",mutedUserNames:[]},A.handleIncomingMessage(function(e){a.setState(function(t){return{messages:[].concat(Object(C.a)(t.messages),[e])}}),console.log("recieved message: "+e);var t=document.getElementById("messages-list");t.scrollTop=t.scrollHeight},function(e){console.log("error",e),window.alert("An error occured. ".concat(e))}),a.sendMessage=a.sendMessage.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"sendMessage",value:function(e){e.preventDefault(),""===this.state.message?window.alert("Message cannot be blank"):this.state.message.length>500?window.alert("Message cannot be more than 500 characters"):(console.log("sent message: "+this.state.message),A.postMessage(this.props.authToken,this.state.message),this.setState({message:""}))}},{key:"render",value:function(){var e,t=this;return e=0!==this.state.messages.length?this.state.messages.map(function(e){return i.a.createElement(D,{key:e.userName+"_"+t.state.messages.indexOf(e),messageObj:e,admin:t.props.admin,user:t.props.userName,authToken:t.props.authToken,dispatch:t.props.dispatch})}):i.a.createElement("div",{id:"empty-chat-message"},"No messages yet"),i.a.createElement("div",{id:"chat-holder"},i.a.createElement("ul",{id:"messages-list"},e),i.a.createElement("form",{id:"message-form",onSubmit:this.sendMessage},i.a.createElement("input",{id:"message-input",type:"text",autoComplete:"off",value:this.state.message,onChange:function(e){return t.setState({message:e.target.value})}})),i.a.createElement("button",{id:"message-submit",onClick:this.sendMessage,alt:"submit"},i.a.createElement("img",{id:"message-submit-image",src:"/Images/sendMessage.png",alt:"SEND"})))}}]),t}(n.Component),I=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,userName:e.userName,streamAddress:e.streamAddress,admin:e.admin}})(P),R=(a(132),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={hidden:!1},a.unmuteUser=a.unmuteUser.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"unmuteUser",value:function(){var e=this,t=this.props,a=t.userName,n=t.authToken;fetch("https://api.bestclosershow.com/user/alter-permissions/".concat(a),{method:"PATCH",body:JSON.stringify({changes:[{propName:"canChat",value:!0}]}),headers:{"Content-Type":"application/json",Authorization:n}}).then(function(t){200!==t.status?console.log("unmuting user failed"):(e.setState({hidden:!0}),e.props.dispatch({type:"REFETCHMUTEDUSERLIST",refetch:!0}))}).catch(function(e){return console.error("Error: "+e)})}},{key:"render",value:function(){return i.a.createElement("button",{className:(this.state.hidden,"muted-user-button"),onClick:this.unmuteUser},this.props.userName)}}]),t}(i.a.Component)),U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mutedUserNames:[]},a.fetchMutedUsers=a.fetchMutedUsers.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"fetchMutedUsers",value:function(){var e=this;this.props.refetchMutedUserList&&fetch("https://api.bestclosershow.com/user/muted-users",{headers:{Authorization:this.props.authToken}}).then(function(t){return 200!==t.status?console.error("error retrieving muted users unmuteUser Comp"):200===t.status&&e.props.dispatch({type:"REFETCHMUTEDUSERLIST",refetch:!1}),t.json()}).then(function(t){console.log(t),e.setState({mutedUserNames:t})}).catch(function(e){return console.error("Error: "+e)})}},{key:"componentDidMount",value:function(){this.fetchMutedUsers()}},{key:"componentDidUpdate",value:function(){this.fetchMutedUsers()}},{key:"render",value:function(){var e,t=this;return e=0===this.state.mutedUserNames.length?i.a.createElement("div",null,"NO USERS MUTED"):this.state.mutedUserNames.map(function(e){return i.a.createElement(R,{userName:e,key:e,authToken:t.props.authToken,dispatch:t.props.dispatch})}),i.a.createElement("div",{id:"unmute-users-container"},i.a.createElement("h1",null,"Muted Users"),i.a.createElement("p",null,"To unmute a user click their button. Their username should disapper."),i.a.createElement("ul",{id:"muted-users-list-container"},e))}}]),t}(n.Component),F=Object(p.b)(function(e){return{authToken:e.authToken,admin:e.admin,refetchMutedUserList:e.refetchMutedUserList}})(U),L=(a(133),function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={playBackError:!1},e.onPlayError=e.onPlayError.bind(Object(v.a)(e)),e.getResources=e.getResources.bind(Object(v.a)(e)),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getResources",value:function(){var e=this;fetch("https://api.bestclosershow.com/resources",{headers:{"Content-Type":"application/json",Authorization:this.props.authToken}}).then(function(e){return 200!==e.status&&console.log("getResources fetch failed"),e.json()}).then(function(t){var a=[];t.docs.forEach(function(t){t.isStreamLink?e.props.dispatch({type:"SETSTREAMADDRESS",streamAddress:t.URL}):a.push(t)}),e.props.dispatch({type:"SETARCHIVEDSHOWS",archivedShows:a})}).catch(function(e){return console.error("Error: "+e)})}},{key:"componentDidMount",value:function(){this.props.streamAddress||(this.getResources(),console.log("getResources() ran")),N.a.initialize("UA-149455210-2"),N.a.pageview("stream")}},{key:"onPlayError",value:function(){console.log("onPlayError fired"),this.setState({playBackError:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"stream-chat-container"},this.props.loggedIn?null:i.a.createElement(m.a,{to:"/ACCOUNT"}),this.props.currentlySubscribed?null:this.props.freeDayTokenUsed?i.a.createElement(m.a,{to:"/ACCOUNT"}):null,i.a.createElement("div",{id:"stream-container"},i.a.createElement("h1",{className:"stream-label"},"Best Closer Show"),i.a.createElement("h3",{className:"time-label"},"M-F Midnight(est)-Till its over..."),i.a.createElement("h1",{className:"stream-label"},"Closing Time"),i.a.createElement("h3",{className:"time-label",style:{marginBottom:"15px"}},"Fridays 4-5pm (est)"),this.state.playBackError?i.a.createElement("div",{id:"playback-error-container"},i.a.createElement("h1",{id:"playback-error-comment"},"Awaiting Live Show"),i.a.createElement("button",{onClick:function(){return e.setState({playBackError:!1})},id:"refresh-stream-button"},"Refresh Stream")):i.a.createElement(O.a,{width:"100%",height:"auto",url:this.props.streamAddress,onError:this.onPlayError,playing:!0,controls:!0,playsinline:!0})),i.a.createElement("div",{id:"chat-container"},i.a.createElement(I,null)),this.props.admin?i.a.createElement("div",{id:"unmute-user-container"},i.a.createElement(F,null)):null)}}]),t}(n.Component)),M=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,userName:e.userName,streamAddress:e.streamAddress,admin:e.admin,currentlySubscribed:e.currentlySubscribed,freeDayToken:e.freeDayToken,freeDayTokenUsed:e.freeDayTokenUsed}})(L),H=a(12),V=(a(134),a(135),a(73)),x=a.n(V),W=(a(155),function(e){return i.a.createElement("div",{id:"loading-container"},i.a.createElement(x.a,{className:"loader",type:"BallTriangle",color:"white",height:100,width:100}),i.a.createElement("h1",null,e.message))}),G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={identity:"",password:"",deleteToggled:!1,promoCode:"",loading:!1,loadingMessage:"Loading"},a.logout=a.logout.bind(Object(v.a)(a)),a.deleteAccount=a.deleteAccount.bind(Object(v.a)(a)),a.updateField=a.updateField.bind(Object(v.a)(a)),a.subscribe=a.subscribe.bind(Object(v.a)(a)),a.deleteToggle=a.deleteToggle.bind(Object(v.a)(a)),a.applyPromo=a.applyPromo.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){N.a.initialize("UA-149455210-2"),N.a.pageview("/logged-in")}},{key:"updateField",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value))}},{key:"logout",value:function(){this.props.dispatch({type:"LOGOUT"})}},{key:"deleteAccount",value:function(){var e=this;window.confirm("Are you sure you want to PERMANENTLY DELETE YOUR ACCOUNT?")&&(this.setState({loading:!0,loadingMessage:"Awaiting Account Deletion Confirmation"}),fetch("https://api.bestclosershow.com/user",{method:"delete",body:JSON.stringify({identity:this.state.identity,password:this.state.password}),headers:{"Content-Type":"application/json",Authorization:this.props.authToken}}).then(function(t){return e.setState({loading:!1}),200!==t.status&&window.alert("Something went wrong! Try again."),t.json()}).then(function(t){console.log(t),e.logout()}).catch(function(t){e.setState({loading:!1}),console.error("Error: "+t)}))}},{key:"subscribe",value:function(){var e=this;this.setState({loading:!0,loadingMessage:"Setting Up a PayPal Subscription Transaction"}),fetch("https://api.bestclosershow.com/paypal/subscribe",{method:"post",headers:{"Content-Type":"application/json",Authorization:this.props.authToken}}).then(function(t){return e.setState({loading:!1}),200!==t.status&&window.alert("Error subscribing. Please try again!"),t.json()}).then(function(e){window.location.href=e.approvalLink}).catch(function(t){e.setState({loading:!1}),console.error("Error: "+t)})}},{key:"deleteToggle",value:function(e){e.preventDefault(),this.setState(function(e){return{deleteToggled:!e.deleteToggled}})}},{key:"applyPromo",value:function(){var e=this;this.setState({loading:!0,loadingMessage:"Awaiting Confirmation of Free Trial"}),fetch("https://api.bestclosershow.com/user/apply-promo",{method:"post",headers:{"Content-Type":"application/json",Authorization:this.props.authToken},body:JSON.stringify({promoCode:this.state.promoCode})}).then(function(t){e.setState({loading:!1}),200!==t.status?500===t.status?window.alert("Internal Server Error"):window.alert("Invalid Promo Code"):200===t.status&&window.alert("You have full access for 24 hours. Please logout and log back in to gain access.")}).catch(function(t){e.setState({loading:!1}),console.error("Error: "+t)})}},{key:"render",value:function(){var e=this.props;return i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:this.state.loadingMessage}):null,i.a.createElement("div",{id:"signed-in-container"},i.a.createElement("h1",null,"Hello ",e.userName,"!"),i.a.createElement("h2",null,"Manage your account from this page."),i.a.createElement("button",{onClick:this.logout,className:"signed-in-button logout"},"Logout"),this.props.currentlySubscribed?null:i.a.createElement("button",{onClick:this.subscribe,className:"signed-in-button"},"Subscribe"),this.props.freeDayToken.length>5?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{onChange:this.updateField,id:"promoCode",className:"promo-input",type:"text",placeholder:"Promo Code",value:this.state.promoCode.trim()}),i.a.createElement("button",{onClick:this.applyPromo,className:"signed-in-button"},"Apply Promo")),this.props.admin?i.a.createElement(h.b,{to:"/admin"},i.a.createElement("button",{className:"signed-in-button"},"Admin Page")):null,this.state.deleteToggled?i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{className:"delete-confirmation-input",id:"identity",type:"text",placeholder:"Username or Email",value:this.state.identity,onChange:this.updateField}),i.a.createElement("input",{className:"delete-confirmation-input",id:"password",type:"password",placeholder:"Password",value:this.state.password,onChange:this.updateField}),i.a.createElement("button",{onClick:this.deleteAccount,className:"signed-in-button delete-account"},"Delete Account"),i.a.createElement("div",{id:"delete-toggle",style:{marginTop:"30px"},onClick:this.deleteToggle},"Click here to hide delete field.")):i.a.createElement("div",{id:"delete-toggle",onClick:this.deleteToggle},"Want to delete your account? Click here."),i.a.createElement(h.b,{to:"/GIFT-SELECT",id:"gift-link"},"CloserGifting")))}}]),t}(n.Component),z=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,userName:e.userName,currentlySubscribed:e.currentlySubscribed,freeDayToken:e.freeDayToken,freeDayTokenUsed:e.freeDayTokenUsed,admin:e.admin}})(G),B=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={signupEmail:"",signupUsername:"",signupPassword:"",signupPasswordConfirm:"",signupFirstName:"",signupLastName:"",signupPromoCode:"",signinUser:"",signinPassword:"",signupSelected:!1,loading:!1,loadingMessage:"Loading"},a.updateField=a.updateField.bind(Object(v.a)(a)),a.login=a.login.bind(Object(v.a)(a)),a.signup=a.signup.bind(Object(v.a)(a)),a.toggleSelected=a.toggleSelected.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){N.a.initialize("UA-149455210-2"),this.props.loggedIn?N.a.pageview("/logged-in"):N.a.pageview("/login")}},{key:"toggleSelected",value:function(e){e.preventDefault(),e.stopPropagation(),"signup"===e.target.id?this.setState({signupSelected:!0}):"login"===e.target.id&&this.setState({signupSelected:!1})}},{key:"updateField",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value))}},{key:"login",value:function(e){var t=this;e&&(e.preventDefault(),e.stopPropagation());var a=this.state,n=a.signinUser,i=a.signinPassword;""===i||""===n?window.alert("Password or Email is blank!"):(this.setState({loading:!0,loadingMessage:"Logging In"}),fetch("https://api.bestclosershow.com/user/login",{method:"post",body:JSON.stringify({identity:n,password:i}),headers:{"Content-Type":"application/json"}}).then(function(e){return t.setState({loading:!1}),200!==e.status&&window.alert("Invalid Credentials"),e.json()}).then(function(e){console.log(e),e.hasPaypalRecurringId&&!e.paidSubscription&&window.alert("IF YOU DID NOT SUBSCRIBE YET DISREGARD THIS MESSAGE. Otherwise, we are currently awaiting payment confirmation from PayPal to verify your subscription and grant you access to the show. If this message continues for more than 24 hours please cancel the subscription via your PayPal account and re-subscribe."),"Auth successful"===e.message&&(t.props.dispatch({type:"LOGIN",authToken:e.token,userName:n,admin:e.admin,currentlySubscribed:e.paidSubscription,freeDayToken:e.freeDayToken,freeDayTokenUsed:e.freeDayTokenUsed}),e.paidSubscription||"string"===typeof e.freeDayToken||window.alert("According to our records your subscription is not paid. If you have just subscribed and are still getting this message check your email because paypal may require you to confirm the transaction."))}).catch(function(e){t.setState({loading:!1}),console.error("Error: "+e)}))}},{key:"signup",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.signupEmail,i=a.signupUsername,s=a.signupPassword,o=a.signupPasswordConfirm,r=a.signupFirstName,c=a.signupLastName,l=a.signupPromoCode;""===n||""===i||""===s||""===o?window.alert("All fields must be filled"):s!==o?window.alert("Passwords do not match!"):(this.setState({loading:!0,loadingMessage:"Awaiting Account Creation Confirmation"}),fetch("https://api.bestclosershow.com/user/signup",{method:"post",body:JSON.stringify({email:n.replace(/\s/g,""),userName:i.replace(/\s/g,""),password:s,firstName:r,lastName:c,promoCode:l}),headers:{"Content-Type":"application/json"}}).then(function(e){return t.setState({loading:!1}),200!==e.status&&window.alert("Username or email already in use"),e.json()}).then(function(e){console.log(e),t.setState({signinUser:n,signinPassword:s}),t.login()}).catch(function(e){t.setState({loading:!1}),console.error("Error: "+e)}))}},{key:"render",value:function(){var e;return e=!0===this.props.loggedIn?i.a.createElement(z,{userName:this.props.userName}):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"signup-signin-container"},i.a.createElement("div",{id:"selections-bar"},i.a.createElement("h1",{onClick:this.toggleSelected,id:"login",style:{borderTopLeftRadius:"15px",borderBottomRightRadius:"5px"},className:this.state.signupSelected?"sign-option":"sign-option selected-option"},"LOG IN"),i.a.createElement("h1",{onClick:this.toggleSelected,id:"signup",style:{borderTopRightRadius:"15px",borderBottomLeftRadius:"5px"},className:this.state.signupSelected?"sign-option selected-option":"sign-option"},"SIGNUP")),i.a.createElement("div",{id:"selected-container"},this.state.signupSelected?i.a.createElement("form",{className:"form",onSubmit:this.signup},i.a.createElement("input",{onChange:this.updateField,id:"signupFirstName",className:"signup-input",type:"text",placeholder:"First Name",value:this.state.signupFirstName}),i.a.createElement("input",{onChange:this.updateField,id:"signupLastName",className:"signup-input",type:"text",placeholder:"Last Name",value:this.state.signupLastName}),i.a.createElement("input",{onChange:this.updateField,id:"signupUsername",className:"signup-input",type:"text",placeholder:"Username",value:this.state.signupUsername.replace(/\s/g,"")}),i.a.createElement("input",{onChange:this.updateField,id:"signupEmail",className:"signup-input",type:"text",placeholder:"Email",value:this.state.signupEmail.replace(/\s/g,"")}),i.a.createElement("input",{onChange:this.updateField,id:"signupPassword",className:"signup-input",type:"password",placeholder:"Password",value:this.state.signupPassword}),i.a.createElement("input",{onChange:this.updateField,id:"signupPasswordConfirm",className:"signup-input",type:"password",placeholder:"Confirm Password",value:this.state.signupPasswordConfirm}),i.a.createElement("input",{onChange:this.updateField,id:"signupPromoCode",className:"signup-input",type:"text",placeholder:"Promo Code",value:this.state.signupPromoCode.trim()}),i.a.createElement("input",{className:"submit-button",type:"submit",value:"SIGN UP"})):i.a.createElement("div",null,i.a.createElement("form",{className:"form",onSubmit:this.login},i.a.createElement("input",{onChange:this.updateField,id:"signinUser",className:"signup-input",type:"text",placeholder:"Username or Email",value:this.state.signinUser}),i.a.createElement("input",{onChange:this.updateField,id:"signinPassword",className:"signup-input",type:"password",placeholder:"Password",value:this.state.signinPassword}),i.a.createElement("input",{className:"submit-button",type:"submit",value:"LOG IN"})),i.a.createElement(h.b,{to:"/PASSWORD-RECOVERY",id:"password-recovery"},"Forgot your password? Click Here.")))),i.a.createElement(h.b,{to:"/GIFT-SELECT",id:"gift-link"},"CloserGifting")),i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:this.state.loadingMessage}):null,e)}}]),t}(n.Component),q=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,userName:e.userName}})(B),_=(a(156),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setReduxSelectedArchive=a.setReduxSelectedArchive.bind(Object(v.a)(a)),a.removeArchive=a.removeArchive.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setReduxSelectedArchive",value:function(){this.props.dispatch({type:"SELECTARCHIVE",selectedArchive:this.props.archive})}},{key:"removeArchive",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.archive,i=a.authToken;fetch("https://api.bestclosershow.com/resources/".concat(n._id),{method:"delete",headers:{"Content-Type":"application/json",Authorization:i}}).then(function(e){200!==e.status?window.alert("Resource not deleted"):200===e.status&&(window.alert("Resource deleted"),t.props.dispatch({type:"CLEARARCHIVES"}))}).catch(function(e){return console.error("Error: "+e)})}},{key:"render",value:function(){var e=this.props.archive.date.split("-"),t=new Date(parseInt(e[0]),parseInt(e[1])-1,parseInt(e[2])).toDateString();return i.a.createElement(h.b,{to:"/WATCH-ARCHIVE",onClick:this.setReduxSelectedArchive},i.a.createElement("div",{className:"archive-container"},i.a.createElement("img",{className:"archive-thumbnail",src:"https://api.bestclosershow.com/resources/image/".concat(this.props.archive.fileNames.thumbnail,"?Authorization=").concat(this.props.authToken),alt:"thumbnail"}),i.a.createElement("h1",{className:"archive-title"},this.props.title," #",this.props.archive.showNumber),i.a.createElement("p",{className:"archive-date"},t),this.props.description.length>1?i.a.createElement("p",{className:"archive-description"},this.props.description):null,this.props.admin?i.a.createElement("h1",{className:"delete-archive-button",onClick:this.removeArchive},"DELETE"):null))}}]),t}(i.a.Component)),J=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1},a.getResources=a.getResources.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getResources",value:function(){var e=this;this.setState({loading:!0}),fetch("https://api.bestclosershow.com/resources",{headers:{"Content-Type":"application/json",Authorization:this.props.authToken}}).then(function(e){return 200!==e.status&&console.log("getResources fetch failed"),e.json()}).then(function(t){var a=[];t.docs.forEach(function(t){t.isStreamLink?e.props.dispatch({type:"SETSTREAMADDRESS",streamAddress:t.URL}):a.splice(0,0,t)}),e.props.dispatch({type:"SETARCHIVEDSHOWS",archivedShows:a}),e.setState({loading:!1})}).catch(function(t){e.setState({loading:!1}),console.error("Error: "+t)})}},{key:"componentDidMount",value:function(){this.getResources(),N.a.initialize("UA-149455210-2"),N.a.pageview("/viewing-archives")}},{key:"render",value:function(){var e=this,t=this.props.archivedShows.sort(function(e,t){var a=parseInt(e.showNumber),n=parseInt(t.showNumber);return a<n?1:a>n?-1:0}).map(function(t){return i.a.createElement(_,{archive:t,dispatch:e.props.dispatch,title:t.title,description:t.description,key:t.fileNames.video,authToken:e.props.authToken,admin:e.props.admin})});return i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:"Retrieving Archives"}):null,i.a.createElement("div",{id:"archives-container"},this.props.admin?i.a.createElement(h.b,{to:"/ADMIN"},i.a.createElement("h1",{id:"add-archive-link"},"ADD ARCHIVE")):null,this.props.loggedIn?null:i.a.createElement(m.a,{to:"/ACCOUNT"}),this.props.currentlySubscribed?null:!1===this.props.freeDayTokenUsed?null:i.a.createElement(m.a,{to:"/ACCOUNT"}),i.a.createElement("h1",{onClick:this.getResources,className:t.length<1?"link":null},"THE ARCHIVES"),i.a.createElement("div",{id:"archive-tiles-container"},t)))}}]),t}(n.Component),Y=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,userName:e.userName,admin:e.admin,archivedShows:e.archivedShows,currentlySubscribed:e.currentlySubscribed,freeDayToken:e.freeDayToken,freeDayTokenUsed:e.freeDayTokenUsed}})(J),X=(a(157),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){N.a.initialize("UA-149455210-2"),N.a.pageview("/watching-archive/date=".concat(this.props.archive.date))}},{key:"render",value:function(){var e=this.props.archive,t=e.title,a=e.description,n=e.isStreamLink,s="https://api.bestclosershow.com/resources/video/".concat(this.props.archive.fileNames.video,"?Authorization=").concat(this.props.authToken),o=this.props.archive.date.replace(/-/g,","),r=new Date(o).toDateString();return i.a.createElement("div",{id:"watch-archive-container"},this.props.loggedIn?null:i.a.createElement(m.a,{to:"/ACCOUNT"}),this.props.currentlySubscribed?null:this.props.freeDayTokenUsed?i.a.createElement(m.a,{to:"/ACCOUNT"}):null,n?i.a.createElement(m.a,{to:"/STREAM"}):null,i.a.createElement("div",{id:"watch-archive-video-container"},i.a.createElement("video",{id:"archive-video",src:s,type:"video/mp4",autoPlay:!0,controls:!0,controlsList:"nodownload"},"Update to a modern browser to view video."),i.a.createElement("h1",null,t," #",this.props.archive.showNumber," ",r),i.a.createElement("p",{id:"watch-archive-description"},a)),i.a.createElement("div",{id:"archives-chat-wrapper"},i.a.createElement(I,null)))}}]),t}(n.Component)),K=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,userName:e.userName,admin:e.admin,archive:e.selectedArchive,currentlySubscribed:e.currentlySubscribed,freeDayTokenUsed:e.freeDayTokenUsed}})(X),Q=(a(158),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={requestSuccessful:!1,recoveryEmail:"",loading:!1},a.updateField=a.updateField.bind(Object(v.a)(a)),a.requestEmailReset=a.requestEmailReset.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){N.a.initialize("UA-149455210-2"),N.a.pageview("/send-password-reset")}},{key:"updateField",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value))}},{key:"requestEmailReset",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),this.setState({loading:!0}),fetch("https://api.bestclosershow.com/password-reset-request/".concat(this.state.recoveryEmail)).then(function(e){t.setState({loading:!1}),200!==e.status?window.alert("Email not found"):200===e.status&&t.setState({requestSuccessful:!0})}).catch(function(e){t.setState({loading:!1}),window.alert("An error occured!"+e)})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:"Awaiting Confirmation of Password Reset Email Being Sent"}):null,i.a.createElement("div",{id:"password-recover-container"},i.a.createElement("form",{className:"form",onSubmit:this.requestEmailReset},i.a.createElement("h1",{className:"form-label"},"GET PASSWORD RESET EMAIL"),i.a.createElement("input",{onChange:this.updateField,id:"recoveryEmail",className:"signup-input",type:"text",placeholder:"Account Email",value:this.state.recoveryEmail}),i.a.createElement("input",{className:"submit-button",type:"submit",value:"REQUEST EMAIL"})),this.state.requestSuccessful?i.a.createElement("div",{id:"request-success-message"},i.a.createElement("h3",null,"Password Recover Email Successfully Sent!"),i.a.createElement("p",null,"If you don't recieve an email within 15 minutes return to this page and try again.")):null))}}]),t}(n.Component)),$=(a(159),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={title:"",href:"",description:"Archive Description"},a.updateField=a.updateField.bind(Object(v.a)(a)),a.addArchive=a.addArchive.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateField",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value))}},{key:"addArchive",value:function(e){var t=this;e.preventDefault();var a=this.props.authToken,n=this.state,i=n.title,s=n.href,o=n.description;fetch("https://api.bestclosershow.com/resources/new-resource",{method:"post",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({title:i,URL:s,description:o})}).then(function(e){200!==e.status?window.alert("Adding Archive Failed. Try again!"):200===e.status&&(window.alert("Archive Added"),t.props.dispatch({type:"CLEARARCHIVES"}))}).catch(function(e){return console.error("Error: "+e)})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("form",{id:"add-resource-form",className:"form",onSubmit:this.addArchive},i.a.createElement("h1",{className:"form-label"},"ADD RESOURCE"),i.a.createElement("input",{onChange:this.updateField,id:"title",className:"signup-input",type:"text",placeholder:"Archive Title",value:this.state.title}),i.a.createElement("input",{onChange:this.updateField,id:"href",className:"signup-input",type:"text",placeholder:"Archive Link Address",value:this.state.href}),i.a.createElement("textarea",{onChange:this.updateField,name:"description",id:"description",form:"add-resource-form",value:this.state.description}),i.a.createElement("input",{className:"submit-button",type:"submit",value:"ADD ARCHIVE"})))}}]),t}(n.Component)),Z=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,userName:e.userName,admin:e.admin}})($),ee=(a(160),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={resetSuccess:!1,newPassword:"",confirmNewPassword:"",loading:!1},a.sendPasswordResetRequest=a.sendPasswordResetRequest.bind(Object(v.a)(a)),a.updateField=a.updateField.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){N.a.initialize("UA-149455210-2"),N.a.pageview("/changing-password")}},{key:"updateField",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value))}},{key:"sendPasswordResetRequest",value:function(){var e=this;this.state.newPassword!==this.state.confirmNewPassword?window.alert("Passwords do not match!"):(this.setState({loading:!0}),fetch("https://api.bestclosershow.com/password-reset-request",{method:"post",body:JSON.stringify({password:this.state.newPassword,confirmPassword:this.state.confirmNewPassword,token:this.props.match.params.resetPasswordAuthToken}),headers:{"Content-Type":"application/json"}}).then(function(t){e.setState({loading:!1}),401===t.status?window.alert("Reset email has expired. Please request another reset email and try again!"):500===t.status?window.alert("Internal server error. Please request another reset email and try again!"):200===t.status&&e.setState({resetSuccess:!0})}).catch(function(t){e.setState({loading:!1}),window.alert("Error with reset request: ".concat(t))}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:"Awaiting Confirmation of Password Reset"}):null,i.a.createElement("div",{id:"password-reset-container"},i.a.createElement("h1",{id:"password-reset-label"},"Reset Password for ",this.props.match.params.userName),i.a.createElement("input",{className:"password-reset-input",value:this.state.newPassword,id:"newPassword",onChange:this.updateField,type:"password",placeholder:"NEW PASSWORD"}),i.a.createElement("input",{className:"password-reset-input",value:this.state.confirmNewPassword,id:"confirmNewPassword",onChange:this.updateField,type:"password",placeholder:"CONFIRM NEW PASSWORD"}),i.a.createElement("button",{className:"password-reset-input",id:"password-reset-submit-button",onClick:this.sendPasswordResetRequest},"Change Password"),this.state.resetSuccess?i.a.createElement("div",{id:"password-reset-success-message"},i.a.createElement("h3",null,"Password Reset Successful!"),i.a.createElement("p",null,"You should now have access to your account!")):null))}}]),t}(n.Component)),te=(a(161),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={archiveTitle:"",archiveDescription:"",archiveFile:"",thumbnailFile:"",awaitingArchiveConfirmation:!1,archiveFileDuration:"",archiveDate:"",archiveNumber:""},a.updateField=a.updateField.bind(Object(v.a)(a)),a.addArchiveFile=a.addArchiveFile.bind(Object(v.a)(a)),a.addThumbnailFile=a.addThumbnailFile.bind(Object(v.a)(a)),a.uploadArchive=a.uploadArchive.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){N.a.initialize("UA-149455210-2"),N.a.pageview("/admin-page")}},{key:"updateField",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value))}},{key:"addArchiveFile",value:function(e){var t=this;this.setState({archiveFile:e.target.files[0]});var a=window.document.createElement("video");a.src=URL.createObjectURL(e.target.files[0]);var n=setInterval(function(){"number"===typeof a.duration&&a.duration>1?(console.log("setting duration"),t.setState({archiveFileDuration:Math.floor(a.duration)}),clearInterval(n)):console.log("Value not set")},500)}},{key:"addThumbnailFile",value:function(e){this.setState({thumbnailFile:e.target.files[0]})}},{key:"uploadArchive",value:function(){var e=this;if("number"!==typeof this.state.archiveFileDuration||this.state.archiveFileDuration<1||"object"!==typeof this.state.archiveFile||""===this.state.archiveTitle||this.state.archiveDate.length<1)window.alert("Double check the archive you are trying to upload. Something is not filled out properly");else{var t=new FormData;t.append("video",this.state.archiveFile),t.append("thumbnail",this.state.thumbnailFile),t.append("title",this.state.archiveTitle),t.append("description",this.state.archiveDescription),t.append("date",this.state.archiveDate),t.append("duration",this.state.archiveFileDuration),t.append("showNumber",this.state.archiveNumber),this.setState({awaitingArchiveConfirmation:!0}),fetch("https://api.bestclosershow.com/resources/new-resource",{method:"POST",headers:{Authorization:this.props.authToken},body:t}).then(function(t){e.setState({awaitingArchiveConfirmation:!1}),200===t.status?window.alert("Resource Successfully Uploaded"):200!==t.status&&window.alert("Error uploading resource!"),t.json()}).then(function(e){return console.log(e)}).catch(function(t){e.setState({awaitingArchiveConfirmation:!1}),console.error("Error:",t)})}}},{key:"render",value:function(){return i.a.createElement("div",{className:"admin-item"},i.a.createElement("h2",null,"Add Archive"),this.state.awaitingArchiveConfirmation?i.a.createElement(W,{message:"Awaiting Archive Upload Confirmation"}):i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:"text",id:"archiveTitle",onChange:this.updateField,className:"admin-input",placeholder:"Archive Title",value:this.state.archiveTitle}),i.a.createElement("input",{type:"date",id:"archiveDate",onChange:this.updateField,className:"admin-input",placeholder:"Show Date",value:this.state.archiveDate}),i.a.createElement("input",{type:"number",id:"archiveNumber",onChange:this.updateField,className:"admin-input",placeholder:"Show Number",value:this.state.archiveNumber}),i.a.createElement("textarea",{type:"text",id:"archiveDescription",onChange:this.updateField,className:"admin-input",placeholder:"Archive Description",value:this.state.archiveDescription}),i.a.createElement("label",{htmlFor:"Archive",style:{fontWeight:"bold"}},"Archive Video: "),i.a.createElement("input",{id:"archiveFile",type:"file",name:"Archive",onChange:this.addArchiveFile}),i.a.createElement("div",{style:{height:"20px"}}),i.a.createElement("label",{htmlFor:"Thumbnail",style:{fontWeight:"bold"}},"Thumbnail Image: "),i.a.createElement("input",{type:"file",name:"Thumbnail",onChange:this.addThumbnailFile}),i.a.createElement("button",{onClick:this.uploadArchive,id:"upload-button",className:"admin-button"},"UPLOAD")))}}]),t}(n.Component)),ae=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getGiftLink=function(){a.setState({loading:!0});var e=document.getElementById("months").value;fetch("https://api.bestclosershow.com/gift/generate-link/".concat(e),{method:"post",headers:{Authorization:a.props.authToken}}).then(function(e){return 200!==e.status&&window.alert("Something went wrong generating the link. Please try again!"),a.setState({loading:!1}),e.json()}).then(function(e){a.setState({accessLink:e.accessLink})}).catch(function(e){console.error(e),a.setState({loading:!1})})},a.state={loading:!1,accessLink:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:"Awaiting Gift Link Generation"}):i.a.createElement("div",{id:"generate-gift-link-contianer"},i.a.createElement("h1",null,"Generate Gift Link"),"Months: ",i.a.createElement("input",{type:"number",defaultValue:"1",id:"months"}),i.a.createElement("div",{onClick:this.getGiftLink},"GET LINK"),i.a.createElement("a",{href:this.state.accessLink},this.state.accessLink)))}}]),t}(n.Component),ne=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={checkUserName:""},a.updateField=a.updateField.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateField",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){return i.a.createElement("div",{id:"admin-container"},this.props.admin?null:i.a.createElement(m.a,{to:"/ACCOUNT"}),i.a.createElement("h1",{id:"admin-title"},"ADMIN VIEW"),i.a.createElement("div",{id:"admin-items-container"},i.a.createElement("div",{className:"admin-item"},i.a.createElement("h2",null,"Stream/Chat"),i.a.createElement(O.a,{width:"100%",height:"auto",url:"https://stream.bestclosershow.com/hls/stream.m3u8",onError:console.log("Playback error admin view."),playing:!0,controls:!0,playsinline:!0}),i.a.createElement("div",{id:"admin-chat"},i.a.createElement(I,null))),i.a.createElement(te,{authToken:this.props.authToken}),i.a.createElement(ae,{authToken:this.props.authToken})))}}]),t}(n.Component),ie=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,admin:e.admin}})(ne),se=(a(162),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={token:"",confirmed:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.paymentConfirmationToken;this.setState({token:t}),fetch("https://api.bestclosershow.com/paypal/confirm-payment?Authorization=".concat(t)).then(function(t){e.setState({confirmed:!0})}).catch(function(t){console.error(t),e.setState({confirmed:!0})}),N.a.initialize("UA-149455210-2"),N.a.pageview("/awaiting-subscripiton-confirmation")}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.confirmed?i.a.createElement(m.a,{to:"/ACCOUNT"}):i.a.createElement(W,{message:"Awaiting Confirmation of Subscription"}))}}]),t}(n.Component)),oe=(a(163),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).select=function(){a.setState({loading:!0}),fetch("https://api.bestclosershow.com/gift/create-transaction/".concat(a.props.months)).then(function(e){return 200!==e.status&&(a.setState({loading:!1}),window.alert("Something went wrong creating the paypal transaction. Please try again!")),e.json()}).then(function(e){console.log(e.approvalLink),e.approvalLink&&(window.location.href=e.approvalLink)}).catch(function(e){console.error(e),a.setState({loading:!1})})},a.state={loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e;return e=12===this.props.months?"gift-option year":6===this.props.months?"gift-option half-year":3===this.props.months?"gift-option quarter-year":"gift-option",i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:"Setting Up a PayPal Transaction"}):null,i.a.createElement("div",{onClick:this.select,className:e},i.a.createElement("h2",null,this.props.months," ",1===this.props.months?"MONTH":"MONTHS"),i.a.createElement("h1",null,i.a.createElement("sup",null,"$"),5*this.props.months)))}}]),t}(i.a.Component)),re=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("ol",null,i.a.createElement("h1",{style:{margin:"10px auto"}},"How To Give"),i.a.createElement("li",null,"Select an option"),i.a.createElement("li",null,"Pay on PayPal"),i.a.createElement("li",null,"Share the link on the page you are redirected to with the recipient ONLY")),i.a.createElement("div",{id:"gift-options-container"},i.a.createElement(oe,{months:12}),i.a.createElement(oe,{months:6}),i.a.createElement(oe,{months:3}),i.a.createElement(oe,{months:1})))}}]),t}(n.Component),ce=a(74),le=a.n(ce),ue=(a(175),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={token:"",monthCount:"",paypalParams:{},accessLink:"",loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=le.a.parse(this.props.location.search),a=this.props.match.params,n=a.monthCount,i=a.token;this.setState({token:i,monthCount:n,paypalParams:t,loading:!0});var s=JSON.parse(localStorage.getItem("giftAccount"));s&&s.paymentId===t.paymentId?this.setState({accessLink:s.accessLink,loading:!1}):fetch("https://api.bestclosershow.com/gift/execute-payment",{method:"POST",headers:{Authorization:i,"Content-Type":"application/json"},body:JSON.stringify({payerID:t.PayerID,paymentID:t.paymentId})}).then(function(e){return 200!==e.status&&window.alert("Payment was not successfully completed, this is most likely an issue with PayPal. Please try again!"),e.json()}).then(function(a){console.log(a),e.setState({accessLink:a.accessLink,loading:!1}),localStorage.setItem("giftAccount",JSON.stringify({accessLink:a.accessLink,paymentId:t.paymentId}))}).catch(function(t){console.error("Error: ".concat(t)),e.setState({loading:!1})})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:"Retrieving Gift Recipient's Access Link"}):null,i.a.createElement("div",{id:"payout-container"},i.a.createElement("h1",null,this.state.monthCount," MONTH ACCESS LINK"),i.a.createElement("a",{href:this.state.accessLink},this.state.accessLink),i.a.createElement("h1",null,"Share this link with the recipient ONLY!"),i.a.createElement("p",null," Whover has this link can claim the time you bought for the recipient.")))}}]),t}(n.Component)),de=(a(176),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={signupSelected:!0,signupEmail:"",signupUsername:"",signupPassword:"",signupPasswordConfirm:"",signupFirstName:"",signupLastName:"",signupPromoCode:"",signinUser:"",signinPassword:"",loading:!1,loadingMessage:"Loading"},a.updateField=a.updateField.bind(Object(v.a)(a)),a.login=a.login.bind(Object(v.a)(a)),a.signup=a.signup.bind(Object(v.a)(a)),a.toggleSelected=a.toggleSelected.bind(Object(v.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){N.a.initialize("UA-149455210-2"),this.props.loggedIn?N.a.pageview("/logged-in"):N.a.pageview("/gift-account-signup")}},{key:"toggleSelected",value:function(e){e.preventDefault(),e.stopPropagation(),"signup"===e.target.id?this.setState({signupSelected:!0}):"login"===e.target.id&&this.setState({signupSelected:!1})}},{key:"updateField",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value))}},{key:"login",value:function(e){var t=this;e&&(e.preventDefault(),e.stopPropagation());var a=this.state,n=a.signinUser,i=a.signinPassword;""===i||""===n?window.alert("Password or Email is blank!"):(this.setState({loading:!0,loadingMessage:"Logging In"}),fetch("https://api.bestclosershow.com/user/login",{method:"post",body:JSON.stringify({identity:n,password:i}),headers:{"Content-Type":"application/json"}}).then(function(e){return t.setState({loading:!1}),200!==e.status&&window.alert("Invalid Credentials"),e.json()}).then(function(e){console.log(e),e.hasPaypalRecurringId&&!e.paidSubscription&&window.alert("IF YOU DID NOT SUBSCRIBE YET DISREGARD THIS MESSAGE. Otherwise, we are currently awaiting payment confirmation from PayPal to verify your subscription and grant you access to the show. If this message continues for more than 24 hours please cancel the subscription via your PayPal account and re-subscribe."),"Auth successful"===e.message&&(t.props.dispatch({type:"LOGIN",authToken:e.token,userName:n,admin:e.admin,currentlySubscribed:e.paidSubscription,freeDayToken:e.freeDayToken,freeDayTokenUsed:e.freeDayTokenUsed}),e.paidSubscription||"string"===typeof e.freeDayToken||window.alert("According to our records your subscription is not paid. If you have just subscribed and are still getting this message check your email because paypal may require you to confirm the transaction."))}).catch(function(e){console.error("Error: "+e),t.setState({loading:!1})}))}},{key:"signup",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.signupEmail,i=a.signupUsername,s=a.signupPassword,o=a.signupPasswordConfirm,r=a.signupFirstName,c=a.signupLastName,l=a.signupPromoCode;""===n||""===i||""===s||""===o?window.alert("All fields must be filled"):s!==o?window.alert("Passwords do not match!"):(this.setState({loading:!0,loadingMessage:"Awaiting Account Creation Confirmation"}),fetch("https://api.bestclosershow.com/user/signup",{method:"post",body:JSON.stringify({email:n.replace(/\s/g,""),userName:i.replace(/\s/g,""),password:s,firstName:r,lastName:c,promoCode:l,giftToken:this.props.match.params.token}),headers:{"Content-Type":"application/json"}}).then(function(e){return t.setState({loading:!1}),e.json()}).then(function(e){e.message&&e.message.includes("Gift")?window.alert("Gift link has already been used to create an account!"):e.message&&e.message.includes("taken")&&window.alert("Username or email already in use!"),console.log(e),t.setState({signinUser:n,signinPassword:s}),t.login()}).catch(function(e){console.error("Error: "+e),t.setState({loading:!1})}))}},{key:"render",value:function(){var e,t=this.props.match.params.monthCount;return e=!0===this.props.loggedIn?i.a.createElement(z,{userName:this.props.userName}):i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{id:"gift-signup-message"},"Signup here to get full access for ",t," ",t>1?"months":"month"),i.a.createElement("div",{id:"signup-signin-container"},i.a.createElement("div",{id:"selections-bar"},i.a.createElement("h1",{onClick:this.toggleSelected,id:"login",style:{borderTopLeftRadius:"15px",borderBottomRightRadius:"5px"},className:this.state.signupSelected?"sign-option":"sign-option selected-option"},"LOG IN"),i.a.createElement("h1",{onClick:this.toggleSelected,id:"signup",style:{borderTopRightRadius:"15px",borderBottomLeftRadius:"5px"},className:this.state.signupSelected?"sign-option selected-option":"sign-option"},"SIGNUP")),i.a.createElement("div",{id:"selected-container"},this.state.signupSelected?i.a.createElement("form",{className:"form",onSubmit:this.signup},i.a.createElement("input",{onChange:this.updateField,id:"signupFirstName",className:"signup-input",type:"text",placeholder:"First Name",value:this.state.signupFirstName}),i.a.createElement("input",{onChange:this.updateField,id:"signupLastName",className:"signup-input",type:"text",placeholder:"Last Name",value:this.state.signupLastName}),i.a.createElement("input",{onChange:this.updateField,id:"signupUsername",className:"signup-input",type:"text",placeholder:"Username",value:this.state.signupUsername.replace(/\s/g,"")}),i.a.createElement("input",{onChange:this.updateField,id:"signupEmail",className:"signup-input",type:"text",placeholder:"Email",value:this.state.signupEmail.replace(/\s/g,"")}),i.a.createElement("input",{onChange:this.updateField,id:"signupPassword",className:"signup-input",type:"password",placeholder:"Password",value:this.state.signupPassword}),i.a.createElement("input",{onChange:this.updateField,id:"signupPasswordConfirm",className:"signup-input",type:"password",placeholder:"Confirm Password",value:this.state.signupPasswordConfirm}),i.a.createElement("input",{className:"submit-button",type:"submit",value:"SIGN UP"})):i.a.createElement("div",null,i.a.createElement("form",{className:"form",onSubmit:this.login},i.a.createElement("input",{onChange:this.updateField,id:"signinUser",className:"signup-input",type:"text",placeholder:"Username or Email",value:this.state.signinUser}),i.a.createElement("input",{onChange:this.updateField,id:"signinPassword",className:"signup-input",type:"password",placeholder:"Password",value:this.state.signinPassword}),i.a.createElement("input",{className:"submit-button",type:"submit",value:"LOG IN"})),i.a.createElement(h.b,{to:"/PASSWORD-RECOVERY",id:"password-recovery"},"Forgot your password? Click Here.")))),i.a.createElement(h.b,{to:"/GIFT-SELECT",id:"gift-link"},"CloserGifting")),i.a.createElement(i.a.Fragment,null,this.state.loading?i.a.createElement(W,{message:this.state.loadingMessage}):null,e)}}]),t}(n.Component)),he=Object(p.b)(function(e){return{loggedIn:e.loggedIn,authToken:e.authToken,userName:e.userName}})(de),me=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(p.a,{store:E},i.a.createElement(h.a,null,i.a.createElement(y,null),i.a.createElement(m.b,{path:"/(|ACCOUNT)/",component:q}),i.a.createElement(m.b,{path:"/STREAM",component:M}),i.a.createElement(m.b,{path:"/ARCHIVES",component:Y}),i.a.createElement(m.b,{path:"/WATCH-ARCHIVE",component:K}),i.a.createElement(m.b,{path:"/PASSWORD-RECOVERY",component:Q}),i.a.createElement(m.b,{path:"/ADD-ARCHIVE",component:Z}),i.a.createElement(m.b,{path:"/ADMIN",component:ie}),i.a.createElement(m.b,{path:"/RESET-PASSWORD/:resetPasswordAuthToken/:userName",component:ee}),i.a.createElement(m.b,{path:"/CONFIRM-PAYPAL-SUBSCRIPTION/:paymentConfirmationToken",component:se}),i.a.createElement(m.b,{path:"/GIFT-SELECT",component:re}),i.a.createElement(m.b,{path:"/GIFT-LINK-PAYOUT/:monthCount/:token",component:ue}),i.a.createElement(m.b,{path:"/GIFT-ACCOUNT-SIGNUP/:monthCount/:token",component:he}),i.a.createElement(S,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t,a){e.exports=a(177)},81:function(e,t,a){},86:function(e,t,a){},97:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.f0ff4032.chunk.js.map